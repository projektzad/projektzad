{% extends 'base.html' %}

{% block content %}
<h2>Modify Group Members</h2>

<!-- Dropdown to Select a Group -->
<form method="get">
    <div class="form-group">
        <label for="group_name">Select Group</label>
        <select class="form-control" id="group_name" name="group_name" onchange="this.form.submit()">
            <option value="" disabled selected>-- Select a Group --</option>
            {% for group in groups %}
            <option value="{{ group }}" {% if group == selected_group %}selected{% endif %}>{{ group }}</option>
            {% endfor %}
        </select>
    </div>
</form>

<!-- Show Current Members if a Group is Selected -->
{% if members %}
<h3>Current Members of {{ selected_group }}</h3>
<form method="post">
    <input type="hidden" name="group_name" value="{{ selected_group }}">
    
    <!-- Users to Add Section -->
    <div class="form-group">
        <label for="add_users">Users to Add</label>
        <p>Select users to add:</p>
        {% for user in users %}
        <div class="form-check">
            <input class="form-check-input" type="checkbox" name="add_users" value="{{ user }}" id="add_{{ loop.index }}">
            <label class="form-check-label" for="add_{{ loop.index }}">
                {{ user }}
            </label>
        </div>
        {% endfor %}
    </div>

    <!-- Users to Remove Section -->
    <div class="form-group">
        <label for="remove_users">Users to Remove</label>
        <p>Select members to remove:</p>
        {% for member in members %}
        <div class="form-check">
            <input class="form-check-input" type="checkbox" name="remove_users" value="{{ member }}" id="remove_{{ loop.index }}">
            <label class="form-check-label" for="remove_{{ loop.index }}">
                {{ member }}
            </label>
        </div>
        {% endfor %}
    </div>

    <button type="submit" class="btn btn-info">Modify Group</button>
</form>
{% endif %}
{% endblock %}
